// Sample data for teachers
        let guruData = [
            {
                id: 1,
                nama: 'Olivia Putri',
                gender: 'P',
                tempatLahir: 'Jakarta',
                tanggalLahir: '1985-01-15',
                agama: 'Islam',
                noHp: '081234567890',
                jabatan: 'Guru Kelas',
                status: 'Aktif',
                foto: 'https://randomuser.me/api/portraits/women/44.jpg',
                username: 'olivia.putri',
                password: 'password123'
            },
            {
                id: 2,
                nama: 'Budi Santoso',
                gender: 'L',
                tempatLahir: 'Bandung',
                tanggalLahir: '1982-03-21',
                agama: 'Islam',
                noHp: '081234567891',
                jabatan: 'Guru Mata Pelajaran',
                status: 'Aktif',
                foto: 'https://randomuser.me/api/portraits/men/32.jpg',
                username: 'budi.santoso',
                password: 'password123'
            },
            {
                id: 3,
                nama: 'Siti Rahayu',
                gender: 'P',
                tempatLahir: 'Surabaya',
                tanggalLahir: '1987-09-10',
                agama: 'Islam',
                noHp: '081234567892',
                jabatan: 'Wali Kelas',
                status: 'Cuti',
                foto: 'https://randomuser.me/api/portraits/women/68.jpg',
                username: 'siti.rahayu',
                password: 'password123'
            },
            {
                id: 4,
                nama: 'Ahmad Hidayat',
                gender: 'L',
                tempatLahir: 'Medan',
                tanggalLahir: '1976-05-04',
                agama: 'Islam',
                noHp: '081234567893',
                jabatan: 'Kepala Sekolah',
                status: 'Aktif',
                foto: 'https://randomuser.me/api/portraits/men/75.jpg',
                username: 'ahmad.hidayat',
                password: 'password123'
            },
            {
                id: 5,
                nama: 'Dewi Lestari',
                gender: 'P',
                tempatLahir: 'Yogyakarta',
                tanggalLahir: '1988-10-12',
                agama: 'Kristen',
                noHp: '081234567894',
                jabatan: 'Guru Mata Pelajaran',
                status: 'Tidak Aktif',
                foto: 'https://randomuser.me/api/portraits/women/22.jpg',
                username: 'dewi.lestari',
                password: 'password123'
            },
            {
                id: 6,
                nama: 'Eko Prasetyo',
                gender: 'L',
                tempatLahir: 'Semarang',
                tanggalLahir: '1984-05-06',
                agama: 'Islam',
                noHp: '081234567895',
                jabatan: 'Wakil Kepala Sekolah',
                status: 'Aktif',
                foto: 'https://randomuser.me/api/portraits/men/42.jpg',
                username: 'eko.prasetyo',
                password: 'password123'
            },
            {
                id: 7,
                nama: 'Rina Wulandari',
                gender: 'P',
                tempatLahir: 'Palembang',
                tanggalLahir: '1990-01-23',
                agama: 'Islam',
                noHp: '081234567896',
                jabatan: 'Guru Kelas',
                status: 'Aktif',
                foto: 'https://randomuser.me/api/portraits/women/56.jpg',
                username: 'rina.wulandari',
                password: 'password123'
            },
            {
                id: 8,
                nama: 'Hendra Wijaya',
                gender: 'L',
                tempatLahir: 'Makassar',
                tanggalLahir: '1986-03-15',
                agama: 'Buddha',
                noHp: '081234567897',
                jabatan: 'Guru Mata Pelajaran',
                status: 'Cuti',
                foto: 'https://randomuser.me/api/portraits/men/62.jpg',
                username: 'hendra.wijaya',
                password: 'password123'
            },
            {
                id: 9,
                nama: 'Anita Susanti',
                gender: 'P',
                tempatLahir: 'Denpasar',
                tanggalLahir: '1989-07-18',
                agama: 'Hindu',
                noHp: '081234567898',
                jabatan: 'Guru Kelas',
                status: 'Aktif',
                foto: 'https://randomuser.me/api/portraits/women/33.jpg',
                username: 'anita.susanti',
                password: 'password123'
            },
            {
                id: 10,
                nama: 'Dodi Permana',
                gender: 'L',
                tempatLahir: 'Padang',
                tanggalLahir: '1983-11-05',
                agama: 'Islam',
                noHp: '081234567899',
                jabatan: 'Guru Mata Pelajaran',
                status: 'Aktif',
                foto: 'https://randomuser.me/api/portraits/men/55.jpg',
                username: 'dodi.permana',
                password: 'password123'
            },
            {
                id: 11,
                nama: 'Maya Indah',
                gender: 'P',
                tempatLahir: 'Jakarta',
                tanggalLahir: '1991-04-12',
                agama: 'Islam',
                noHp: '081234567810',
                jabatan: 'Guru Kelas',
                status: 'Aktif',
                foto: 'https://randomuser.me/api/portraits/women/23.jpg',
                username: 'maya.indah',
                password: 'password123'
            },
            {
                id: 12,
                nama: 'Rudi Hartono',
                gender: 'L',
                tempatLahir: 'Surabaya',
                tanggalLahir: '1980-08-30',
                agama: 'Islam',
                noHp: '081234567811',
                jabatan: 'Guru Mata Pelajaran',
                status: 'Aktif',
                foto: 'https://randomuser.me/api/portraits/men/22.jpg',
                username: 'rudi.hartono',
                password: 'password123'
            },
            {
                id: 13,
                nama: 'Lina Marlina',
                gender: 'P',
                tempatLahir: 'Bandung',
                tanggalLahir: '1988-12-05',
                agama: 'Islam',
                noHp: '081234567812',
                jabatan: 'Guru Kelas',
                status: 'Cuti',
                foto: 'https://randomuser.me/api/portraits/women/24.jpg',
                username: 'lina.marlina',
                password: 'password123'
            },
            {
                id: 14,
                nama: 'Joko Widodo',
                gender: 'L',
                tempatLahir: 'Solo',
                tanggalLahir: '1979-06-21',
                agama: 'Islam',
                noHp: '081234567813',
                jabatan: 'Guru Mata Pelajaran',
                status: 'Aktif',
                foto: 'https://randomuser.me/api/portraits/men/23.jpg',
                username: 'joko.widodo',
                password: 'password123'
            },
            {
                id: 15,
                nama: 'Ratna Sari',
                gender: 'P',
                tempatLahir: 'Semarang',
                tanggalLahir: '1992-02-14',
                agama: 'Islam',
                noHp: '081234567814',
                jabatan: 'Guru Kelas',
                status: 'Aktif',
                foto: 'https://randomuser.me/api/portraits/women/25.jpg',
                username: 'ratna.sari',
                password: 'password123'
            },
            {
                id: 16,
                nama: 'Agus Salim',
                gender: 'L',
                tempatLahir: 'Malang',
                tanggalLahir: '1985-09-18',
                agama: 'Islam',
                noHp: '081234567815',
                jabatan: 'Guru Mata Pelajaran',
                status: 'Tidak Aktif',
                foto: 'https://randomuser.me/api/portraits/men/24.jpg',
                username: 'agus.salim',
                password: 'password123'
            }
        ];

        // Pagination variables
        let currentPage = 1;
        const itemsPerPage = 8;
        let filteredData = [...guruData];

        // DOM elements
        const tableBody = document.getElementById('guru-table-body');
        const paginationNumbers = document.getElementById('pagination-numbers');
        const prevPageBtn = document.getElementById('prev-page');
        const nextPageBtn = document.getElementById('next-page');
        const showingStart = document.getElementById('showing-start');
        const showingEnd = document.getElementById('showing-end');
        const totalItems = document.getElementById('total-items');
        const searchInput = document.getElementById('search-input');
        const statusFilter = document.getElementById('status-filter');
        const jabatanFilter = document.getElementById('jabatan-filter');
        const addBtn = document.getElementById('btn-add');
        const modal = document.getElementById('guru-modal');
        const closeModal = document.getElementById('close-modal');
        const cancelForm = document.getElementById('cancel-form');
        const saveForm = document.getElementById('save-form');
        const guruForm = document.getElementById('guru-form');
        const modalTitle = document.getElementById('modal-title');
        const guruIdInput = document.getElementById('guru-id');
        const confirmDialog = document.getElementById('confirm-dialog');
        const cancelDelete = document.getElementById('cancel-delete');
        const confirmDelete = document.getElementById('confirm-delete');
        const fileInput = document.getElementById('foto');
        const fileName = document.getElementById('file-name');
        const fotoPreview = document.getElementById('foto-preview');
        const previewImage = document.getElementById('preview-image');
        let currentDeleteId = null;

        // Format date for display
        function formatDate(dateString) {
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return new Date(dateString).toLocaleDateString('id-ID', options);
        }

        // Get badge class based on status
        function getBadgeClass(status) {
            switch(status.toLowerCase()) {
                case 'aktif':
                    return 'success';
                case 'cuti':
                    return 'warning';
                case 'tidak aktif':
                    return 'danger';
                default:
                    return 'success';
            }
        }

        // Render table data
        function renderTable() {
            // Apply filters and search
            applyFilters();
            
            // Calculate pagination
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, filteredData.length);
            const paginatedData = filteredData.slice(startIndex, endIndex);
            
            // Update pagination info
            showingStart.textContent = filteredData.length > 0 ? startIndex + 1 : 0;
            showingEnd.textContent = endIndex;
            totalItems.textContent = filteredData.length;
            
            // Clear table
            tableBody.innerHTML = '';
            
            // Render rows
            paginatedData.forEach(guru => {
                const row = document.createElement('tr');
                row.className = 'table-row';
                row.innerHTML = `
                    <td class="px-4 py-3 whitespace-nowrap">
                        <img class="h-10 w-10 rounded-full object-cover border-2 border-blue-100" src="${guru.foto}" alt="${guru.nama}">
                    </td>
                    <td class="px-4 py-3 whitespace-nowrap text-gray-700 font-medium">${guru.nama}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-gray-500">${guru.gender}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-gray-500">${guru.tempatLahir}, ${formatDate(guru.tanggalLahir)}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-gray-500">${guru.noHp}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-gray-500">${guru.jabatan}</td>
                    <td class="px-4 py-3 whitespace-nowrap">
                        <span class="badge ${getBadgeClass(guru.status)}">${guru.status}</span>
                    </td>
                    <td class="px-4 py-3 whitespace-nowrap">
                        <div class="flex space-x-2">
                            <button class="text-green-600 hover:text-green-800 edit-btn p-1 hover:bg-green-50 rounded-full transition-colors" data-id="${guru.id}" title="Edit">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                </svg>
                            </button>
                            <button class="text-red-600 hover:text-red-800 delete-btn p-1 hover:bg-red-50 rounded-full transition-colors" data-id="${guru.id}" title="Hapus">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                            </button>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // Add event listeners to edit and delete buttons
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', () => editGuru(parseInt(btn.dataset.id)));
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', () => showDeleteConfirmation(parseInt(btn.dataset.id)));
            });
            
            // Render pagination
            renderPagination();
        }

        // Apply filters and search
        function applyFilters() {
            const searchTerm = searchInput.value.toLowerCase();
            const statusValue = statusFilter.value.toLowerCase();
            const jabatanValue = jabatanFilter.value.toLowerCase();
            
            filteredData = guruData.filter(guru => {
                // Search filter
                const matchesSearch = 
                    guru.nama.toLowerCase().includes(searchTerm) || 
                    guru.tempatLahir.toLowerCase().includes(searchTerm) ||
                    guru.noHp.includes(searchTerm);
                
                // Status filter
                const matchesStatus = statusValue === 'all' || guru.status.toLowerCase() === statusValue;
                
                // Jabatan filter
                const matchesJabatan = jabatanValue === 'all' || guru.jabatan.toLowerCase() === jabatanValue;
                
                return matchesSearch && matchesStatus && matchesJabatan;
            });
            
            // Reset to first page when filters change
            currentPage = 1;
        }

        // Render pagination numbers
        function renderPagination() {
            paginationNumbers.innerHTML = '';
            
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            
            // Update prev/next buttons
            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = currentPage === totalPages || totalPages === 0;
            
            // Add page numbers
            for (let i = 1; i <= totalPages; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `pagination-item ${i === currentPage ? 'active' : 'text-gray-700 hover:bg-blue-50 hover:text-blue-600 border border-gray-200'}`;
                pageBtn.textContent = i;
                pageBtn.addEventListener('click', () => {
                    currentPage = i;
                    renderTable();
                });
                paginationNumbers.appendChild(pageBtn);
            }
        }

        // Show modal for adding new guru
        function showAddModal() {
            modalTitle.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" />
                </svg>
                Tambah Data Guru
            `;
            guruIdInput.value = '';
            guruForm.reset();
            fotoPreview.classList.add('hidden');
            fileName.textContent = 'Belum ada file dipilih';
            modal.style.display = 'block';
        }

        // Show modal for editing guru
        function editGuru(id) {
            const guru = guruData.find(g => g.id === id);
            if (!guru) return;
            
            modalTitle.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg>
                Edit Data Guru
            `;
            guruIdInput.value = guru.id;
            
            // Fill form with guru data
            document.getElementById('nama').value = guru.nama;
            document.querySelector(`input[name="gender"][value="${guru.gender}"]`).checked = true;
            document.getElementById('tempat-lahir').value = guru.tempatLahir;
            document.getElementById('tanggal-lahir').value = guru.tanggalLahir;
            document.getElementById('no-hp').value = guru.noHp;
            document.getElementById('jabatan').value = guru.jabatan;
            document.getElementById('status').value = guru.status;
            document.getElementById('username').value = guru.username;
            document.getElementById('password').value = guru.password;
            document.getElementById('confirm-password').value = guru.password;
            
            // Show existing photo
            fotoPreview.classList.remove('hidden');
            previewImage.src = guru.foto;
            fileName.textContent = 'Foto saat ini';
            
            modal.style.display = 'block';
        }

        // Save guru data
        function saveGuru() {
            // Get form values
            const id = guruIdInput.value ? parseInt(guruIdInput.value) : guruData.length + 1;
            const nama = document.getElementById('nama').value;
            const gender = document.querySelector('input[name="gender"]:checked').value;
            const tempatLahir = document.getElementById('tempat-lahir').value;
            const tanggalLahir = document.getElementById('tanggal-lahir').value;
            const noHp = document.getElementById('no-hp').value;
            const jabatan = document.getElementById('jabatan').value;
            const status = document.getElementById('status').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            // Validate form
            if (!nama || !tempatLahir || !tanggalLahir || !noHp || !jabatan || !status || !username || !password) {
                alert('Semua field harus diisi!');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Password dan konfirmasi password tidak cocok!');
                return;
            }
            
            // Create guru object
            const guru = {
                id,
                nama,
                gender,
                tempatLahir,
                tanggalLahir,
                agama: 'Islam', // Default value since we removed the field
                noHp,
                jabatan,
                status,
                username,
                password,
                foto: 'https://randomuser.me/api/portraits/men/1.jpg' // Default foto
            };
            
            // Handle file upload (in a real app, you would upload the file to a server)
            if (fileInput.files && fileInput.files[0]) {
                // In a real app, you would upload the file and get a URL
                // For this demo, we'll just use the existing URL
                if (guruIdInput.value) {
                    const existingGuru = guruData.find(g => g.id === parseInt(guruIdInput.value));
                    if (existingGuru) {
                        guru.foto = existingGuru.foto;
                    }
                }
            } else if (guruIdInput.value) {
                // Keep existing photo if no new one is uploaded
                const existingGuru = guruData.find(g => g.id === parseInt(guruIdInput.value));
                if (existingGuru) {
                    guru.foto = existingGuru.foto;
                }
            }
            
            // Add or update guru
            if (guruIdInput.value) {
                // Update existing guru
                const index = guruData.findIndex(g => g.id === parseInt(guruIdInput.value));
                if (index !== -1) {
                    guruData[index] = guru;
                }
            } else {
                // Add new guru
                guruData.push(guru);
            }
            
            // Close modal and refresh table
            modal.style.display = 'none';
            renderTable();
        }

        // Show delete confirmation
        function showDeleteConfirmation(id) {
            currentDeleteId = id;
            confirmDialog.style.display = 'block';
        }

        // Delete guru
        function deleteGuru() {
            if (currentDeleteId) {
                guruData = guruData.filter(guru => guru.id !== currentDeleteId);
                currentDeleteId = null;
                confirmDialog.style.display = 'none';
                renderTable();
            }
        }

        // Initialize sidebar toggle
        function initializeSidebar() {
            const toggleButton = document.getElementById('toggle-sidebar');
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('main-content');
            const overlay = document.getElementById('overlay');
            
            toggleButton.addEventListener('click', function() {
                sidebar.classList.toggle('collapsed');
                sidebar.classList.toggle('mobile-open');
                mainContent.classList.toggle('expanded');
                overlay.classList.toggle('show');
            });
            
            // Close sidebar when clicking on overlay
            overlay.addEventListener('click', function() {
                sidebar.classList.remove('mobile-open');
                overlay.classList.remove('show');
            });
        }

        // Handle file input change
        fileInput.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                const file = this.files[0];
                fileName.textContent = file.name;
                
                // Show image preview
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                    fotoPreview.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            } else {
                fileName.textContent = 'Belum ada file dipilih';
                fotoPreview.classList.add('hidden');
            }
        });

        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize sidebar
            initializeSidebar();
            
            // Render initial table
            renderTable();
            
            // Search and filter events
            searchInput.addEventListener('input', renderTable);
            statusFilter.addEventListener('change', renderTable);
            jabatanFilter.addEventListener('change', renderTable);
            
            // Pagination events
            prevPageBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderTable();
                }
            });
            
            nextPageBtn.addEventListener('click', () => {
                const totalPages = Math.ceil(filteredData.length / itemsPerPage);
                if (currentPage < totalPages) {
                    currentPage++;
                    renderTable();
                }
            });
            
            // Modal events
            addBtn.addEventListener('click', showAddModal);
            closeModal.addEventListener('click', () => modal.style.display = 'none');
            cancelForm.addEventListener('click', () => modal.style.display = 'none');
            saveForm.addEventListener('click', saveGuru);
            
            // Delete confirmation events
            cancelDelete.addEventListener('click', () => confirmDialog.style.display = 'none');
            confirmDelete.addEventListener('click', deleteGuru);
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
                if (e.target === confirmDialog) {
                    confirmDialog.style.display = 'none';
                }
            });
        });